const c=require("express"),n=c.Router(),e=require("../logic/match");n.post("/",async(r,a)=>{const{accion:o}=r.body;if(console.log("\u{1F4E5} Acci\xF3n recibida del sensor:",o),e.estaEnEspera())return console.log("\u26A0\uFE0F Partido en espera. No se aceptan acciones."),a.json({ok:!1,mensaje:"Partido en espera"});if(e.estaEnEligiendoSacador()){switch(o){case"sumarP1":console.log("\u27A1\uFE0F Accion: elegir Opci\xF3n 1"),e.seleccionarMenuSacador(0);break;case"sumarP2":console.log("\u27A1\uFE0F Accion: elegir Opci\xF3n 2"),e.seleccionarMenuSacador(0);break;case"restar":console.log("\u27A1\uFE0F Accion: elegir Opci\xF3n 2"),e.seleccionarMenuSacador(1);break;case"3-toques":console.log("\u21A9\uFE0F Accion: Volver paso anterior"),e.volverMenuSacador();break;default:return console.warn(`\u26A0\uFE0F Acci\xF3n desconocida en eligiendoSacador: ${o}`),a.status(400).json({error:"Acci\xF3n no reconocida en eligiendoSacador"})}return a.json({ok:!0,estado:"eligiendoSacador",menu:e.menuSacador})}if(e.menu&&e.menu.activo){switch(o){case"sumarP1":case"sumarP2":await e.seleccionarMenu();break;case"restar":e.navegarMenu();break;case"3-toques":e.cerrarMenu();break;default:return console.warn(`\u26A0\uFE0F Acci\xF3n desconocida recibida en men\xFA: ${o}`),a.status(400).json({error:"Acci\xF3n no reconocida en men\xFA"})}return a.json({ok:!0,menu:e.menu})}switch(o){case"sumarP1":e.sumarPunto(0);break;case"sumarP2":e.sumarPunto(1);break;case"restar":e.estaEnCalentamiento()?e.restarPunto():e.deshacer();break;case"3-toques":e.abrirMenu();break;default:return console.warn(`\u26A0\uFE0F Acci\xF3n desconocida recibida: ${o}`),a.status(400).json({error:"Acci\xF3n no reconocida"})}a.json({ok:!0,estado:e.getEstado(),menu:e.menu})}),module.exports=n;
